<!DOCTYPE html>
<html lang="en">
<head>
  <title>Greenhouse PLC Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<nav>
  <a id="navDashboard" class="active" href="index.html">ğŸ“Š Dashboard</a>
  <a id="navControls" href="subscribe_publish.html">ğŸ”„ Subscribe and Publish</a>
</nav>

<!-- Dashboard Page -->
<div id="dashboardPage" class="page active">
  <div class="layout">

    <!-- Temperature PLC -->
    <div class="plc-box">
      <h3>ğŸŒ¡ï¸ Temp PLC</h3>
      <div class="gauge temp">
        Temp: <span id="tempVal">--</span> Â°C
        <div class="bar"><div id="tempBar" class="fill"></div></div>
      </div>
      <div class="actuator">Heater: <span id="heaterPct">--</span>% <span id="heaterStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="heaterGauge" class="act-fill"></div></div>
      <div class="actuator">Cooler: <span id="coolerPct">--</span>% <span id="coolerStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="coolerGauge" class="act-fill"></div></div>

      <!-- Temp override controls -->
      <div style="margin-top: 15px; font-weight: normal; font-size: 0.9em;">
        <label for="tempOverrideInput">Force Temp Override (Â°C): </label>
        <input type="number" id="tempOverrideInput" placeholder="e.g. 40" style="width: 100px;" />
        <button id="applyTempOverrideBtn">Apply</button>
        <button id="resetTempOverrideBtn">Reset</button>
        <div id="tempOverrideStatus" style="margin-top: 6px; color: #555;">No override set.</div>
      </div>
    </div>

    <!-- Moisture PLC -->
    <div class="plc-box">
      <h3>ğŸ’§ Irrigation PLC</h3>
      <div class="gauge hum">
        Moisture: <span id="humVal">--</span> %
        <div class="bar"><div id="humBar" class="fill"></div></div>
      </div>
      <div class="actuator">Pump: <span id="pumpPct">--</span>% <span id="pumpStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="pumpGauge" class="act-fill"></div></div>
      <div class="actuator">Drain: <span id="drainPct">--</span>% <span id="drainStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="drainGauge" class="act-fill"></div></div>

      <!-- Moisture override controls -->
      <div style="margin-top: 15px; font-weight: normal; font-size: 0.9em;">
        <label for="humOverrideInput">Force Moisture Override (%): </label>
        <input type="number" id="humOverrideInput" placeholder="e.g. 55" style="width: 100px;" />
        <button id="applyHumOverrideBtn">Apply</button>
        <button id="resetHumOverrideBtn">Reset</button>
        <div id="humOverrideStatus" style="margin-top: 6px; color: #555;">No override set.</div>
      </div>
    </div>

    <!-- Light PLC -->
    <div class="plc-box">
      <h3>ğŸ’¡ Light PLC</h3>
      <div class="gauge light">
        Light: <span id="lightVal">--</span> lux
        <div class="bar"><div id="lightBar" class="fill"></div></div>
      </div>
      <div class="actuator">Lamp Light: <span id="lampPct">--</span>% <span id="lampStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="lampGauge" class="act-fill"></div></div>
      <div class="actuator">Shutter: <span id="shutterPct">--</span>% <span id="shutterStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="shutterGauge" class="act-fill"></div></div>

      <!-- Light override controls -->
      <div style="margin-top: 15px; font-weight: normal; font-size: 0.9em;">
        <label for="lightOverrideInput">Force Light Override (lux): </label>
        <input type="number" id="lightOverrideInput" placeholder="e.g. 700" style="width: 100px;" />
        <button id="applyLightOverrideBtn">Apply</button>
        <button id="resetLightOverrideBtn">Reset</button>
        <div id="lightOverrideStatus" style="margin-top: 6px; color: #555;">No override set.</div>
      </div>
    </div>

    <!-- CO2 PLC -->
    <div class="plc-box">
      <h3>ğŸŸ¢ COâ‚‚ PLC</h3>
      <div class="gauge co2">
        COâ‚‚: <span id="co2Val">--</span> ppm
        <div class="bar"><div id="co2Bar" class="fill"></div></div>
      </div>
      <div class="actuator">COâ‚‚ Pump: <span id="co2PumpPct">--</span>% <span id="co2PumpStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="co2PumpGauge" class="act-fill"></div></div>
      <div class="actuator">Vent: <span id="co2VentPct">--</span>% <span id="co2VentStatus" class="status">âœ…</span></div>
      <div class="act-bar"><div id="co2VentGauge" class="act-fill"></div></div>

      <!-- CO2 override controls -->
      <div style="margin-top: 15px; font-weight: normal; font-size: 0.9em;">
        <label for="co2OverrideInput">Force COâ‚‚ Override (ppm): </label>
        <input type="number" id="co2OverrideInput" placeholder="e.g. 800" style="width: 100px;" />
        <button id="applyCo2OverrideBtn">Apply</button>
        <button id="resetCo2OverrideBtn">Reset</button>
        <div id="co2OverrideStatus" style="margin-top: 6px; color: #555;">No override set.</div>
      </div>
    </div>


    <!-- PLC 1 Collector -->
    <div class="plc-box collector">
      <h3>ğŸ“¦ PLC 1 â€“ Collector</h3>
      <div class="timestamp" id="timestamp">Timestamp: --</div>
      <div class="alert-log" id="alerts">Alerts: None</div>
    </div>
  </div>
</div>

<script src="scripts.js"></script>
<script>
  // Only run live update on dashboard page
  if (document.getElementById('dashboardPage')) {
    update();
    setInterval(update, 100);
  }
</script>
</body>
</html>
