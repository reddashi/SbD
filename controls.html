<!DOCTYPE html>
<html lang="en">
<head>
  <title>Greenhouse PLC Control Panel</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<nav>
  <a id="navDashboard" href="index.html">üìä Dashboard</a>
  <a id="navControls" class="active" href="controls.html">‚öôÔ∏è Control Panel</a>
</nav>

<!-- Controls Page -->
<div id="controlsPage" class="page active">
  <h2>Sensor Simulation</h2>
  <div class="control-group">
    <label for="simTemp">Temperature (¬∞C)</label>
    <input type="range" id="simTemp" min="0" max="50" value="25" step="0.1" />
    <span id="simTempVal">25</span> ¬∞C
  </div>
  <div class="control-group">
    <label for="simHum">Moisture (%)</label>
    <input type="range" id="simHum" min="0" max="100" value="50" />
    <span id="simHumVal">50</span> %
  </div>
  <div class="control-group">
    <label for="simLight">Light (lux)</label>
    <input type="range" id="simLight" min="0" max="1000" value="500" />
    <span id="simLightVal">500</span> lux
  </div>
  <div class="control-group">
    <label for="simCO2">CO‚ÇÇ (ppm)</label>
    <input type="range" id="simCO2" min="0" max="1200" value="600" />
    <span id="simCO2Val">600</span> ppm
  </div>
  <button id="applySim">Apply Simulation</button>
</div>

<script src="scripts.js"></script>
<script>
  // Initialize controls page UI behavior
  if (document.getElementById('controlsPage')) {
    // update label text on input
    Object.keys(simInputs).forEach(key => {
      simInputs[key].dispatchEvent(new Event('input'));
    });

    document.getElementById('applySim').onclick = () => {
      const simulatedData = {
        sensors: {
          temperature: parseFloat(simInputs.temperature.value),
          moisture: parseFloat(simInputs.moisture.value),
          light: parseFloat(simInputs.light.value),
          co2: parseFloat(simInputs.co2.value),
          timestamp: new Date().toLocaleTimeString()
        },
        actuators: {
          heater_pct: simInputs.temperature.value < 20 ? 80 : 0,
          cooler_pct: simInputs.temperature.value > 30 ? 80 : 0,
          pump_pct: simInputs.moisture.value < 40 ? 70 : 0,
          drain_pct: simInputs.moisture.value > 80 ? 50 : 0,
          lamp_pct: simInputs.light.value < 300 ? 100 : 0,
          shutter_pct: simInputs.light.value > 800 ? 60 : 0,
          co2_pump_pct: simInputs.co2.value < 600 ? 90 : 0,
          co2_vent_pct: simInputs.co2.value > 1000 ? 70 : 0
        },
        alerts: {}
      };

      // Store simulated data somewhere accessible (localStorage for example)
      localStorage.setItem('simulatedData', JSON.stringify(simulatedData));
      alert('Simulation data saved! Switch to Dashboard to see it.');
    };
  }
</script>

</body>
</html>
